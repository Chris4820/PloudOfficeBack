{"version":3,"file":"design.service.js","sourceRoot":"/","sources":["modules/design/design.service.ts"],"names":[],"mappings":";;;;;AAKA,oCA2BC;AAED,kEAUC;AA5CD,+DAAuC;AAKhC,KAAK,UAAU,YAAY,CAAC,OAAe,EAAE,IAA0B,EAAE,UAA0B,EAAE,gBAAgC;IAC1I,MAAM,UAAU,GAAQ;QACtB,YAAY,EAAE,IAAI,CAAC,YAAY;QAC/B,cAAc,EAAE,IAAI,CAAC,cAAc;KACpC,CAAC;IACF,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,UAAU,CAAC,CAAC;IAC/C,OAAO;IACP,IAAI,UAAU,KAAK,SAAS,EAAE,CAAC;QAC7B,UAAU,CAAC,OAAO,GAAG,UAAU,CAAC,CAAC,0BAA0B;IAC7D,CAAC;IAED,aAAa;IACb,IAAI,gBAAgB,KAAK,SAAS,EAAE,CAAC;QACnC,UAAU,CAAC,aAAa,GAAG,gBAAgB,CAAC,CAAC,0BAA0B;IACzE,CAAC;IAED,OAAO,MAAM,gBAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QAC9B,KAAK,EAAE;YACL,EAAE,EAAE,OAAO;SACZ;QACD,IAAI,EAAE,UAAU;QAChB,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,OAAO,EAAE,IAAI;YACb,aAAa,EAAE,IAAI;SACpB;KACF,CAAC,CAAC;AACL,CAAC;AAEM,KAAK,UAAU,2BAA2B,CAAC,OAAe,EAAE,OAAgB,EAAE,aAAsB;IACzG,OAAO,MAAM,gBAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QAC9B,KAAK,EAAE;YACL,EAAE,EAAE,OAAO;SACZ;QACD,IAAI,EAAE;YACJ,GAAG,CAAC,OAAO,IAAI,EAAE,OAAO,EAAE,CAAC;YAC3B,GAAG,CAAC,aAAa,IAAI,EAAE,aAAa,EAAE,CAAC;SACxC;KACF,CAAC,CAAC;AACL,CAAC","sourcesContent":["import prisma from \"../../libs/prisma\";\r\nimport type { UpdateDesignFormData } from \"./design.schema\";\r\n\r\n\r\n\r\nexport async function updateDesign(storeId: number, data: UpdateDesignFormData, newLogoUrl?: string | null, newBackgroundUrl?: string | null) {\r\n  const updateData: any = {\r\n    primaryColor: data.primaryColor,\r\n    secondaryColor: data.secondaryColor,\r\n  };\r\n  console.log(\"Update Design Data:\", updateData);\r\n  // Logo\r\n  if (newLogoUrl !== undefined) {\r\n    updateData.logoUrl = newLogoUrl; // pode ser null ou string\r\n  }\r\n\r\n  // Background\r\n  if (newBackgroundUrl !== undefined) {\r\n    updateData.backgroundUrl = newBackgroundUrl; // pode ser null ou string\r\n  }\r\n\r\n  return await prisma.shop.update({\r\n    where: {\r\n      id: storeId,\r\n    },\r\n    data: updateData,\r\n    select: {\r\n      id: true,\r\n      logoUrl: true,\r\n      backgroundUrl: true,\r\n    }\r\n  });\r\n}\r\n\r\nexport async function updateLogoOrBackgroundImage(storeId: number, logoUrl?: string, backgroundUrl?: string) {\r\n  return await prisma.shop.update({\r\n    where: {\r\n      id: storeId,\r\n    },\r\n    data: {\r\n      ...(logoUrl && { logoUrl }),\r\n      ...(backgroundUrl && { backgroundUrl }),\r\n    },\r\n  });\r\n}"]}