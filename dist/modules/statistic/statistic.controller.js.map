{"version":3,"file":"statistic.controller.js","sourceRoot":"/","sources":["modules/statistic/statistic.controller.ts"],"names":[],"mappings":";;AAKA,0DAsBC;AA1BD,2DAAyF;AAIlF,KAAK,UAAU,uBAAuB,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;IAC3F,IAAI,CAAC;QACH,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC,KAAK,CAAC;QACjC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACnB,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,KAAe,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAC3D,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,GAAa,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QACrD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAClB,MAAM,CAAC,SAAS,EAAE,GAAG,EAAE,QAAQ,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;YACnD,IAAA,qCAAiB,EAAC,GAAG,CAAC,OAAO,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC;YACxD,IAAA,kCAAc,EAAC,GAAG,CAAC,OAAO,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC;YACrD,IAAA,mCAAe,EAAC,GAAG,CAAC,OAAO,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC;SACvD,CAAC,CAAC;QACH,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,SAAS,EAAE;gBACT,SAAS;gBACT,GAAG;gBACH,QAAQ;aACT;SACF,CAAC,CAAA;IACJ,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,IAAI,CAAC,KAAK,CAAC,CAAC;IACd,CAAC;AACH,CAAC","sourcesContent":["import type { NextFunction, Request, Response } from \"express\";\r\nimport { getStatisticStore, getTopEmployees, getTopServices } from \"./statistic.service\";\r\n\r\n\r\n\r\nexport async function GetStatsStoreController(req: Request, res: Response, next: NextFunction) {\r\n  try {\r\n    const { start, end } = req.query;\r\n    console.log(start);\r\n    const from = start ? new Date(start as string) : undefined;\r\n    const to = end ? new Date(end as string) : undefined;\r\n    console.log(from);\r\n    const [statistic, top, employed] = await Promise.all([\r\n      getStatisticStore(req.storeId, { start: from, end: to }),\r\n      getTopServices(req.storeId, { start: from, end: to }),\r\n      getTopEmployees(req.storeId, { start: from, end: to }),\r\n    ]);\r\n    return res.status(200).json({\r\n      statistic: {\r\n        statistic,\r\n        top,\r\n        employed\r\n      }\r\n    })\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n}"]}